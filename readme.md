# Учебная Виртуальная Машина (УВМ)

Этот проект реализует ассемблер и интерпретатор для учебной виртуальной машины (УВМ), а также тестовую программу для выполнения операций над вектором данных. 

---

## Описание файлов

### 1. **`assembler.py`**
Ассемблер преобразует программу в формате XML в бинарный файл, а также создаёт лог-файл для отладки.

- **Входные параметры:**
  1. `input_file` — путь к XML-файлу с текстом программы.
  2. `output_file` — путь к бинарному файлу, в который сохраняется результат.
  3. `log_file` — путь к XML-файлу лога, содержащему инструкции и их двоичное представление.

- **Функции:**
  - Парсинг XML-файла программы.
  - Генерация бинарного файла.
  - Создание лога в формате XML.

- **Запуск:**
```bash
python assembler.py <input_file> <output_file> <log_file>
```
Пример команды:
```bash
python assembler.py program.xml program.bin log.xml
```
2. interpreter.py
Интерпретатор выполняет команды из бинарного файла, изменяет значения в памяти, и сохраняет результат в XML-файл.

Входные параметры:

binary_file — путь к бинарному файлу программы.
output_file — путь к XML-файлу, куда сохраняются результаты.
memory_range — диапазон адресов памяти, которые будут записаны в результат.
Функции:

Чтение бинарного файла.
Выполнение инструкций: LOAD, READ, WRITE, POPCNT.
Сохранение указанного диапазона памяти в XML-файл.
Запуск:
```bash
python interpreter.py <binary_file> <output_file> <memory_range>
```
Пример команды:
```bash
python interpreter.py program.bin result.xml 0-5
```
3. vector_popcnt.py
Этот скрипт автоматизирует выполнение тестовой программы для выполнения операции POPCNT над вектором данных.

Описание:
Генерирует XML-файл программы с командами POPCNT.
Собирает бинарный файл с помощью assembler.py.
Выполняет программу с помощью interpreter.py.
Сохраняет результат выполнения в файл vector_popcnt_test.xml.

Функции:
Создание программы с командами POPCNT.
Автоматический вызов ассемблера и интерпретатора.
Удаление временных файлов (XML программы, бинарного файла и лога).
Запуск:
```bash
python vector_popcnt.py
```
Результат: Сообщение в консоли:
Программа успешно выполнена. Результаты сохранены в vector_popcnt_test.xml
Форматы файлов
XML-файл программы
Пример программы для выполнения операции POPCNT:
```xml
<?xml version="1.0" encoding="utf-8"?>
<Program>
    <Instruction>
        <Command>POPCNT</Command>
        <A>0</A>
        <B>0</B>
    </Instruction>
    <Instruction>
        <Command>POPCNT</Command>
        <A>0</A>
        <B>1</B>
    </Instruction>
    ...
</Program>
```
Бинарный файл
Содержит последовательность инструкций в двоичном виде. Пример:
Копировать код
83 00 00 00 83 01 00 00 83 02 00 00 83 03 00 00 83 04 00 00 83 05 00 00
Лог-файл
Пример XML-лога, создаваемого ассемблером:
```xml
<Log>
    <Instruction>
        <Command>POPCNT</Command>
        <A>0</A>
        <B>0</B>
        <Hex>0x83000000</Hex>
    </Instruction>
    ...
</Log>
```
Результат интерпретации
XML-файл с содержимым памяти в указанном диапазоне:
```xml
<Output>
    <Memory>
        <Address>0</Address>
        <Value>2</Value>
    </Memory>
    ...
</Output>
```
Тестовая программа
Тестовая программа выполняет операцию POPCNT поэлементно над вектором данных длины 6: [5, 10, 20, 40, 80, 160]. После выполнения все элементы вектора принимают значение 2 (количество единиц в каждом числе).

Запуск теста:
```bash
python vector_popcnt.py
```# config4
